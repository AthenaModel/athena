<html>
<head>
<title>athena 6.3.3: htools(n) -- HTML Generation Tools, submodule of projectlib(n)</title>
<style type="text/css" media="screen,print">
/* ehtml(5) Standard CSS */

/*---------------------------------------------------------*/
/* General Use                                             */

a {
    /* No underlines */
    text-decoration: none;
}

/* Special formatting for definition lists, to get proper
 * blank lines after descriptions but not after topics. */
dt {
    margin-bottom: 0;
}

dd { 
    margin-bottom: 1em; 
}

dd > p:first-child { 
    margin-top: 0; 
}


/*---------------------------------------------------------*/
/* Specific Macros                                         */

/* bigmark */
div.bigmark {
    display: inline;
    font-family: Verdana;
    font-size: 100%;
    background: black;
    color: white;
    border: 1px solid black;
    border-radius: 5px;
    padding-left: 2px;
    padding-right: 2px;
}

/* def, defitem, defopt */

dt.def {
    font-weight: bold;
}

dt.defitem {
    font-weight: bold;
    font-family: monospace;
}

dt.defopt {
    font-weight: bold;
    font-family: monospace;
}


/* example/ */
pre.example {
    background:     #FFFDD1 ;
    border:         1px solid blue;
    padding-top:    2px;
    padding-bottom: 2px;
    padding-left:   4px;
}


/* hrule */
hr.hrule {
    margin-top: 1em;
    margin-bottom: 1em;
}

/* iref */
a.iref {
    font-family: monospace;
}

/* itemlist */                
ul.itemlist {
    padding-left: 0;
    list-style-type: none;
}

/* listing/ */
pre.listing {
    background:     #FFFDD1 ;
    border:         1px solid blue;
    padding-top:    4px;
    padding-bottom: 4px;
    padding-left:   4px;
}

span.linenum {
    background:     #E3E08F ;
}

/* mark */
div.mark {
    display:       inline;
    font-family:   Verdana;
    font-size:     75%;
    background:    black;
    color:         white;
    border:        1px solid black;
    border-radius: 5px;
    padding-left:  2px;
    padding-right: 2px;
}

/* procedure */

table.procedure {
    border: 1px solid black;
    border-collapse: collapse;
    width: 100%;
}

table.procedure td {
    border: 1px solid black;
}

td.procedure-index {
    padding-right: 5px;
    text-align: right;
    width: 2em;
}


/* topiclist/ */
.topiclist {
    margin-top:    1em;
    margin-bottom: 1em;
}

tr.topic {
    vertical-align: baseline;
}

tr.topicname {
    min-width: 1.5em;
}

/* tt/ */

.tt {
    font-family: monospace;
}



/* olp/ */

ol.olp > li {
    margin-bottom: 1em;
}

/* ulp/ */

ul.ulp > li {
    margin-bottom: 1em;
}

/*---------------------------------------------------------*/
/* table/ plus macros that use it.    Most formatting is
 * depends on the "table" class.                           */

table {
    margin-top:     1em;
    margin-bottom:  1em;
    vertical-align: baseline;
}

th {
    padding-left: 5px;
    text-align:   left;
}

td {
    padding-left:   5px;
    vertical-align: baseline;
}


/* "table" class: standard table formatting. */
.table {
    border:           1px solid black;
    border-spacing:   0;
    color:            black;
    background-color: white;
}

.table tr:first-child {
    font-weight:      bold;
    color:            white;
    background-color: #000099;    
}

.table tr.tr-odd {
    background-color: #EEEEEE;
}

.table tr.tr-even { }

.table-wide {
    width: 100%;
}

        BODY {
            color: black;
            background: white;
            margin-left: 6%;
            margin-right: 6%;
        }

        H1 {
            margin-left: -5%;
        }
        H2 {
            margin-left: -5%;
        }
        HR {
            margin-left: -5%;
        }

        TABLE {
            text-align:    left;
        }
        
        /* mktree styles */
        ul.mktree  li  { list-style: none; }
        ul.mktree, ul.mktree ul, ul.mktree li { 
            margin-left:10px; padding:0px; }
        ul.mktree li .bullet { padding-left: 10px }
        ul.mktree  li.liOpen   .bullet {cursor : pointer; }
        ul.mktree  li.liClosed .bullet {cursor : pointer; }
        ul.mktree  li.liBullet .bullet {cursor : default; }
        ul.mktree  li.liOpen   ul {display: block; }
        ul.mktree  li.liClosed ul {display: none; }
    
</style>



</head>

<body>
<h1 style="background: red;">
&nbsp;athena 6.3.3: Athena Regional Stability Simulation
</h1>
    

<h2><a name="name">NAME</a></h2>
    

<p><b>htools(n)</b> -- HTML Generation Tools, submodule of <a href="../mann/projectlib.html">projectlib(n)</a>

</p>

<ul>

    <li><a href="#name">NAME</a></li>
    

    <li><a href="#synopsis">SYNOPSIS</a></li>
    

    <li><a href="#description">DESCRIPTION</a></li>
    <ul>

    <li><a href="#the_buffer_stack">The Buffer Stack</a></li>

</ul>
    

    <li><a href="#compound_structures">COMPOUND STRUCTURES</a></li>
    <ul>

    <li><a href="#records_and_fields">Records and Fields</a></li>

</ul>
    

    <li><a href="#commands">COMMANDS</a></li>
    

    <li><a href="#instance_commands">INSTANCE COMMANDS</a></li>
    

    <li><a href="#environment">ENVIRONMENT</a></li>
    

    <li><a href="#author">AUTHOR</a></li>
    

    <li><a href="#history">HISTORY</a></li>
    

</ul>
    
    

<h2><a name="synopsis">SYNOPSIS</a></h2>
    

<pre>
package require projectlib 6.3.3
namespace import ::projectlib::htools
</pre>

<ul class="itemlist">
<li><a class="iref" href="#htools">htools <i>object</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#htools-cssfile">-cssfile <i>url</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#htools-footercmd">-footercmd <i>command</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#htools-headercmd">-headercmd <i>command</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#htools-rdb">-rdb <i>rdb</i></a></li>
<li><a class="iref" href="#htools_escape">htools escape <i>text</i></a></li>
<li><a class="iref" href="#br"><i>object</i> br</a></li>
<li><a class="iref" href="#cget"><i>object</i> cget <i>option</i></a></li>
<li><a class="iref" href="#clear"><i>object</i> clear</a></li>
<li><a class="iref" href="#configure"><i>object</i> configure <i>option value...</i></a></li>
<li><a class="iref" href="#dl"><i>object</i> dl ?<i>body</i>?</a></li>
<li><a class="iref" href="#dlitem"><i>object</i> dlitem <i>dt dd</i></a></li>
<li><a class="iref" href="#/dl"><i>object</i> /dl</a></li>
<li><a class="iref" href="#field"><i>object</i> field <i>label</i> ?<i>body</i>?</a></li>
<li><a class="iref" href="#/field"><i>object</i> /field</a></li>
<li><a class="iref" href="#form"><i>object</i> form ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#form-action">-action <i>url</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#form-autosubmit">-autosubmit <i>flag</i></a></li>
<li><a class="iref" href="#/form"><i>object</i> /form</a></li>
<li><a class="iref" href="#get"><i>object</i> get</a></li>
<li><a class="iref" href="#h1"><i>object</i> h1 <i>title</i> ?<i>anchor</i>?</a></li>
<li><a class="iref" href="#h2"><i>object</i> h2 <i>title</i> ?<i>anchor</i>?</a></li>
<li><a class="iref" href="#h3"><i>object</i> h2 <i>title</i> ?<i>anchor</i>?</a></li>
<li><a class="iref" href="#hr"><i>object</i> hr</a></li>
<li><a class="iref" href="#image"><i>object</i> image <i>name</i> ?<i>align</i>?</a></li>
<li><a class="iref" href="#input"><i>object</i> input <i>name itype value</i> ?<i>options...</i>?</a></li>
<li><a class="iref" href="#itype_enum"><b>enum</b></a></li>
<li><a class="iref" href="#itype_text"><b>text</b></a></li>
<li><a class="iref" href="#label"><i>object</i> label <i>for</i> ?<i>text</i>?</a></li>
<li><a class="iref" href="#/label"><i>object</i> /label</a></li>
<li><a class="iref" href="#li"><i>object</i> li ?<i>body</i>?</a></li>
<li><a class="iref" href="#li-text"><i>object</i> li-text <i>text</i></a></li>
<li><a class="iref" href="#/li"><i>object</i> /li</a></li>
<li><a class="iref" href="#link"><i>object</i> link <i>url label</i></a></li>
<li><a class="iref" href="#linkbar"><i>object</i> linkbar <i>linkdict</i></a></li>
<li><a class="iref" href="#linklist"><i>object</i> linklist ?<i>options...</i>? <i>linkdict</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#linklist-delim">-delim <i>delim</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#linklist-default">-default <i>text</i></a></li>
<li><a class="iref" href="#object"><i>object</i> object <i>url</i> ?<i>options...</i>?</a></li>
<li><a class="iref" href="#page"><i>object</i> page <i>title</i> ?<i>body</i>?</a></li>
<li><a class="iref" href="#/page"><i>object</i> /page</a></li>
<li><a class="iref" href="#pager"><i>object</i> pager <i>qdict page pages</i></a></li>
<li><a class="iref" href="#para"><i>object</i> para</a></li>
<li><a class="iref" href="#pop"><i>object</i> pop</a></li>
<li><a class="iref" href="#pre"><i>object</i> pre ?<i>text</i>?</a></li>
<li><a class="iref" href="#/pre"><i>object</i> /pre ?<i>text</i>?</a></li>
<li><a class="iref" href="#push"><i>object</i> push</a></li>
<li><a class="iref" href="#put"><i>object</i> put <i>text</i> ?<i>text...</i>?</a></li>
<li><a class="iref" href="#putif"><i>object</i> putif <i>expr then</i> ?<i>else</i>?</a></li>
<li><a class="iref" href="#putln"><i>object</i> putln <i>text</i> ?<i>text...</i>?</a></li>
<li><a class="iref" href="#query"><i>object</i> query <i>sql</i> ?<i>options...</i>?</a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#query-align">-align <i>string</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#query-default">-default <i>string</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#query-escape">-escape <i>flag</i></a></li>
<li>&nbsp;&nbsp;&nbsp;&nbsp;<a class="iref" href="#query-labels">-labels <i>list</i></a></li>
<li><a class="iref" href="#rowcount"><i>object</i> rowcount</a></li>
<li><a class="iref" href="#record"><i>object</i> record ?<i>body</i>?</a></li>
<li><a class="iref" href="#/record"><i>object</i> /record</a></li>
<li><a class="iref" href="#span"><i>object</i> span <i>cls</i> ?<i>body</i>?</a></li>
<li><a class="iref" href="#/span"><i>object</i> /span</a></li>
<li><a class="iref" href="#submit"><i>object</i> submit ?<i>label</i>?</a></li>
<li><a class="iref" href="#subtitle"><i>object</i> subtitle <i>title</i>
?<i>anchor</i>? ?<i>link label</i> ?<i>link label...</i>??</a></li>
<li><a class="iref" href="#table"><i>object</i> table <i>headers</i> ?<i>body</i>?</a></li>
<li><a class="iref" href="#/table"><i>object</i> /table</a></li>
<li><a class="iref" href="#td"><i>object</i> td ?<i>align</i>? ?<i>body</i>?</a></li>
<li><a class="iref" href="#/td"><i>object</i> /td</a></li>
<li><a class="iref" href="#tr"><i>object</i> tr ?<i>attr value...</i>? ?<i>body</i>?</a></li>
<li><a class="iref" href="#/tr"><i>object</i> /tr</a></li>
<li><a class="iref" href="#tiny"><i>object</i> tiny <i>text</i></a></li>
<li><a class="iref" href="#tinyb"><i>object</i> tinyb <i>text</i></a></li>
<li><a class="iref" href="#tinyi"><i>object</i> tinyi <i>text</i></a></li>
<li><a class="iref" href="#title"><i>object</i> title <i>title</i> ?<i>over</i>? ?<i>under</i>?</a></li>
<li><a class="iref" href="#ul"><i>object</i> ul ?<i>body</i>?</a></li>
<li><a class="iref" href="#/ul"><i>object</i> /ul</a></li>
</ul>


<h2><a name="description">DESCRIPTION</a></h2>
<p>htools(n) provides tools for generation of HTML content.  In
particular, an instance of htools(n) provides a buffer for HTML
generation that makes writing generation code simple and easy.
The application creates an instance and then calls methods of the
instance to add HTML markup and other text to the buffer.</p>

<p>For example, given an htools(n) buffer called <code>::ht</code>,
you can format a simple page as follows:

</p>

<pre>
    ht page "My Page {
        ht h1 "My Page"
        ht putln "Some text for my page."
        ht para
    }
</pre>
<p>This will produce a page that looks like this:

</p>

<pre>
    &lt;html&gt;&lt;head&gt;
    &lt;title&gt;My Page&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
    &lt;h1&gt;My Page&lt;/h1&gt;
    Some text for my page.&lt;p&gt;
    &lt;/body&gt;&lt;/html&gt;
</pre>
<p>The application will either <a class="iref" href="#clear">clear</a> the buffer or begin an
explicit <a class="iref" href="#page">page</a>, then write content using <a class="iref" href="#put">put</a>,
<a class="iref" href="#putln">putln</a>, and the various markup subcommands, then end the page
with <a class="iref" href="#/page">/page</a> if need be.  Once the content is complete, the
<a class="iref" href="#get">get</a> command retrieves the generated HTML text.

</p>

<h2><a name="the_buffer_stack">The Buffer Stack</a></h2>
<p>Content for a list of items is often quite different if the list is
empty; for example, if you have at least one item you generate an HTML
table or list, but if you have no items you generate a statement that
there are no items.  And in such cases, it is usually the case that
the efficient way to find out that there are no items is by trying to
generate the body of the table or list, e.g., by querying an SQLite
database.</p>

<p>This is an annoying case:

</p>

<ul>
  <li> You'd like to generate HTML for the rows in the table as the
       query executes.
  </li><li> There's boilerplate (e.g., the "<code>&lt;table&gt;</code>"
       tag) that has to precede the rows.
  </li><li> But if you find that there are no rows, you don't want the
       boilerplate.
</li></ul>
<p>htools(n) supports this case by providing a "buffer stack".  Before
executing the query, <a class="iref" href="#push">push</a> a new buffer on the stack.  Once
the query is complete, use <a class="iref" href="#pop">pop</a> to return the buffered HTML
and pop the buffer off of the stack.  Then, if query had any content,
you can add the boilerplate, using <a class="iref" href="#put">put</a> to insert the queried
content; and if not you can insert whatever alternative text you prefer.

</p>

<h2><a name="compound_structures">COMPOUND STRUCTURES</a></h2>
<p>htools(n) supports a number of compound structures build up using a 
(possibly nested) sequence of calls.

</p>

<h2><a name="records_and_fields">Records and Fields</a></h2>
<p>A "record" is a borderless table used to present a set of labeled values,
where the label appears in the first column and the value in the second.
Each row in the table is called a "field".  At its most general, a 
record is created like this:

</p>

<pre>
    ht record             ;# Begin the record

    ht field "My Label:"  ;# Start a field
    ht put "My Value..."  ;# Arbitrary content
    ht /field             ;# End the field
      .
      .
      .
    ht /record
</pre>
<p>Both the <a class="iref" href="#record">record</a> and <a class="iref" href="#field">field</a> commands take an optional body, so
the above can also be written

</p>

<pre>
    ht record {                 ;# Begin the record
      ht field "My Label:" {    ;# Start a field
        ht put "My Value..."    ;# Arbitrary content
      }
        .
        .
        .
    }
</pre>


<h2><a name="commands">COMMANDS</a></h2>
<p>htools(n) provides the following commands for use by the application.

</p>

<dl>

<dt class="defitem"><a name="htools">htools <i>object</i> ?<i>options...</i>?</a></dt><dd><p>

Creates a new <a class="iref" href="#htools">htools</a> instance named <i>object</i>, and
returns the fully qualified object name.  The object supports the following
options:

</p><dl>

<dt class="defopt"><a name="htools-cssfile">-cssfile <i>url</i></a></dt><dd>

If given, specifies the (possibly relative) URL for a CSS file.
The appropriate <code>&lt;link&gt;</code> tag will be included in the HTML header.

</dd>
<dt class="defopt"><a name="htools-footercmd">-footercmd <i>command</i></a></dt><dd>

Defines a command that is called when a page footer is needed.  The
command may add any desired content to the buffer using the various
instance commands.  The command's return value is ignored.

</dd>
<dt class="defopt"><a name="htools-headercmd">-headercmd <i>command</i></a></dt><dd>

Defines a command that is called when a page header is needed.  The
command will be called with one additional argument, the page's title.
The command may add any desired content to the buffer using the
various instance commands.  The command's return value is ignored.

</dd>
<dt class="defopt"><a name="htools-rdb">-rdb <i>rdb</i></a></dt><dd>

Specifies the name of an SQLite database handle; if given, the
<a class="iref" href="#query">query</a> command can be used to do arbitrary database queries
and return the result as an HTML table.

</dd>
</dl>

</dd>
<dt class="defitem"><a name="htools_escape">htools escape <i>text</i></a></dt><dd>

Translates the "&amp;", "&lt;" and "&gt;" characters in <i>text</i> into the
corresponding HTML character entities so that the result can be
included in an HTML page without causing mis-formatting.

</dd>
</dl>

<h2><a name="instance_commands">INSTANCE COMMANDS</a></h2>
    

<dl>

<dt class="defitem"><a name="br"><i>object</i> br</a></dt><dd>

Adds a <code>&lt;br&gt;</code> tag to the buffer.

</dd>
<dt class="defitem"><a name="cget"><i>object</i> cget <i>option</i></a></dt><dd>

Returns the value of the specified <i>option</i>.

</dd>
<dt class="defitem"><a name="clear"><i>object</i> clear</a></dt><dd>

Clears the object's contents, popping any extra buffers from the
stack. Note that this is done automatically by the <a class="iref" href="#page">page</a> command.

</dd>
<dt class="defitem"><a name="configure"><i>object</i> configure <i>option value...</i></a></dt><dd>

Sets the value of one or more of the object's
options.

</dd>
<dt class="defitem"><a name="dl"><i>object</i> dl ?<i>body</i>?</a></dt><dd>

Begins a standard <code>&lt;dl&gt;</code> list.  If <i>body</i> is given,
it is executed as a Tcl script and <a class="iref" href="#/dl">/dl</a> is executed automatically.

</dd>
<dt class="defitem"><a name="dlitem"><i>object</i> dlitem <i>dt dd</i></a></dt><dd>

Adds one complete item to the <code>&lt;dl&gt;</code> list, terminated by
a <code>&lt;p&gt;</code>.

</dd>
<dt class="defitem"><a name="/dl"><i>object</i> /dl</a></dt><dd>

Terminates a <code>&lt;dl&gt;</code> list.


</dd>
<dt class="defitem"><a name="field"><i>object</i> field <i>label</i> ?<i>body</i>?</a></dt><dd>

Creates a field, a labeled value, within a <a class="iref" href="#record">record</a> structure; see 
<a href="#records_and_fields">Records and Fields</a>.  The field will have the given <i>label</i>
text.  If the <i>body</i> is given, it is a Tcl script that will create
the desired value content, and the field will be terminated automatically.
If the <i>body</i> is omitted, the field content must be explicitly
terminated by the <a class="iref" href="#/field">/field</a> command.

</dd>
<dt class="defitem"><a name="/field"><i>object</i> /field</a></dt><dd>

Terminates a <a class="iref" href="#field">field</a> in a <a class="iref" href="#record">record</a>.

</dd>
<dt class="defitem"><a name="form"><i>object</i> form ?<i>options...</i>?</a></dt><dd><p>

Adds a <code>&lt;form&gt;</code> element to the buffer; any options and
their values are naively turned into element attributes.</p>

<p>By default, submitting the form will reload the same page with the form's 
parameters as the query.  To load a different page, specify the URL explicitly
using the <b>-action</b> option (i.e., the "action" attribute).</p>

<p>The form's entries are defined by <a class="iref" href="#label">label</a> and <a class="iref" href="#input">input</a> elements,
possibly along with other HTML.</p>

<p>The following options are of particular interest:

</p><dl>
<dt class="defopt"><a name="form-action">-action <i>url</i></a></dt><dd>
The action URL can be absolute, relative to the current page, or "" to simply
reload the current page.  Note that any query in the <i>url</i> will be 
ignored.

</dd>
<dt class="defopt"><a name="form-autosubmit">-autosubmit <i>flag</i></a></dt><dd>
If the <i>flag</i> is true, then the form will be submitted
automatically when form inputs change in particular ways, i.e., when
a new enumerated value is chosen from a pulldown.  Otherwise, the
form will only be submitted when the user presses the 
<a class="iref" href="#submit">submit</a> button.
</dd>
</dl>

</dd>
<dt class="defitem"><a name="/form"><i>object</i> /form</a></dt><dd>

Adds a <code>&lt;/form&gt;</code> element to the buffer, terminating the current
form.

</dd>
<dt class="defitem"><a name="get"><i>object</i> get</a></dt><dd>

Returns the content from the buffer at the top of the stack.

</dd>
<dt class="defitem"><a name="h1"><i>object</i> h1 <i>title</i> ?<i>anchor</i>?</a></dt>
<dt class="defitem"><a name="h2"><i>object</i> h2 <i>title</i> ?<i>anchor</i>?</a></dt>
<dt class="defitem"><a name="h3"><i>object</i> h2 <i>title</i> ?<i>anchor</i>?</a></dt><dd>

Generates an HTML <code>&lt;h1&gt;</code>, <code>&lt;h2&gt;</code>, or
<code>&lt;h3&gt;</code> tag with the given <i>title</i>.  If
<i>anchor</i> is given, it can be used as an anchor to that spot in
the page in URLs from elsewhere in the page (or from other pages
entirely).

</dd>
<dt class="defitem"><a name="hr"><i>object</i> hr</a></dt><dd>

Adds an <code>&lt;hr&gt;</code> tag to the buffer.

</dd>
<dt class="defitem"><a name="image"><i>object</i> image <i>name</i> ?<i>align</i>?</a></dt><dd><p>

Generates an <code>&lt;img&gt;</code> tag with "src" equal to
<code>/image/<i>name</i></code> and the specified alignment,
<b>left</b>, <b>right</b>, or <b>center</b>.</p>

<p>This command is for use with <a href="../mani/mydomain.html">mydomain(i)</a> instances that
support querying Tk images.

</p>
</dd>
<dt class="defitem"><a name="input"><i>object</i> input <i>name itype value</i> ?<i>options...</i>?</a></dt><dd><p>

Inserts an <code>&lt;input&gt;</code> element into the current
<a class="iref" href="#form">form</a>.  The input will have the given <i>name</i> and initial
<i>value</i>; the <i>itype</i> must be one of the input types listed
below.  Any provided options are passed along as attributes;
different input types expect different options.</p>

<p>The input types are as follows:

</p><dl>

<dt class="defitem"><a name="itype_enum"><b>enum</b></a></dt><dd>

An <a href="../mann/enumfield.html">enumfield(n)</a> widget.  The set of
enumerated values comes from a URL specified as the
<code>-src</code> option, which must provide the <b>tcl/enumlist</b> 
or <b>tcl/enumdict</b> content type.  By default, the
<a href="../mann/mybrowser.html">mybrowser(n)</a> will look for a <b>tcl/enumlist</b>; to use a
<b>tcl/enumdict</b>, pass the content type as the value of the
<code>-content</code> option.

</dd>
<dt class="defitem"><a name="itype_text"><b>text</b></a></dt><dd>

A <a href="../mann/textfield.html">textfield(n)</a> widget.  Set the width in characters using
the <code>-size</code> option.
</dd>
</dl>

</dd>
<dt class="defitem"><a name="label"><i>object</i> label <i>for</i> ?<i>text</i>?</a></dt><dd><p>

Inserts a <code>&lt;label&gt;</code> element into a <a class="iref" href="#form">form</a>.  The element
tags the label text associated with the <a class="iref" href="#input">input</a> whose name
is <i>for</i>.</p>

<p>If <i>text</i> is given, it will be inserted as the label text, and
the <a class="iref" href="#/label">/label</a> element will be inserted automatically.

</p>
</dd>
<dt class="defitem"><a name="/label"><i>object</i> /label</a></dt><dd>

Inserts a <code>&lt;/label&gt;</code> element into a <a class="iref" href="#form">form</a>, terminating
the current <a class="iref" href="#label">label</a>.

</dd>
<dt class="defitem"><a name="li"><i>object</i> li ?<i>body</i>?</a></dt><dd><p>

Adds a <code>&lt;li&gt;</code> tag to the buffer.</p>

<p>If <i>body</i> is given, it will be executed as a Tcl script; then,
<a class="iref" href="#/li">/li</a> will be called automatically.

</p>
</dd>
<dt class="defitem"><a name="li-text"><i>object</i> li-text <i>text</i></a></dt><dd>

Adds <code>&lt;li&gt;<i>text</i>&lt;/li&gt;</code> to the buffer.

</dd>
<dt class="defitem"><a name="/li"><i>object</i> /li</a></dt><dd>

Adds a <code>&lt;/li&gt;</code> tag to the buffer.

</dd>
<dt class="defitem"><a name="link"><i>object</i> link <i>url label</i></a></dt><dd>

Adds an <code>&lt;a&gt;</code> link to the buffer with the given
"href" <i>url</i> and text <i>label</i>.

</dd>
<dt class="defitem"><a name="linkbar"><i>object</i> linkbar <i>linkdict</i></a></dt><dd>

Given a dictionary of URLs and label strings, formats a "link bar": a
horizontal bar of links.  Link bars are usually used near the top of a
page to link to content further down.

</dd>
<dt class="defitem"><a name="linklist"><i>object</i> linklist ?<i>options...</i>? <i>linkdict</i></a></dt><dd><p>

Given a dictionary of URLs and label strings, generates a list
of links, concatenated together with ", ".  If the <i>linkdict</i> is
empty, generates nothing.</p>

<p>The options are as follows:

</p><dl>

<dt class="defopt"><a name="linklist-delim">-delim <i>delim</i></a></dt><dd>

Delimiter text to go between the list entries; defaults to ", ".

</dd>
<dt class="defopt"><a name="linklist-default">-default <i>text</i></a></dt><dd>

Specifies the text to generate if the link dict is empty; defaults to
"".

</dd>
</dl>

</dd>
<dt class="defitem"><a name="object"><i>object</i> object <i>url</i> ?<i>options...</i>?</a></dt><dd><p>

Embeds a <b>tk/widget</b> resource in the current page as an 
<code>&lt;object&gt;</code> element.  The resource
is found at the specified <i>url</i>.  The <i>options</i> consist of
any number of option/value pairs with the usual syntax; they are
converted directly into attributes and values on the
<code>&lt;object&gt;</code> in the most naive possible way.</p>

<p>It is common to assign an <code>-id</code>, and to specify the 
<code>-width</code> and <code>-height</code>.

</p>
</dd>
<dt class="defitem"><a name="page"><i>object</i> page <i>title</i> ?<i>body</i>?</a></dt><dd><p>

Clears the buffer and adds the standard HTML header boilerplate,
including the <code>&lt;title&gt;</code> tag.  If the
<code>-headercmd</code> is defined, it will be called; the content it
generates will appears immediately after the <code>&lt;body&gt;</code>
tag.</p>

<p>If <i>body</i> is given, it will be executed as a Tcl script; then,
<a class="iref" href="#/page">/page</a> will be called automatically.

</p>
</dd>
<dt class="defitem"><a name="/page"><i>object</i> /page</a></dt><dd>

Terminates the page, calling <code>-footercmd</code> to add any 
standard HTML footer boilerplate, and returning the formatted HTML.

</dd>
<dt class="defitem"><a name="pager"><i>object</i> pager <i>qdict page pages</i></a></dt><dd><p>

Creates a "Page:" navigation bar for moving through multiple pages of 
output (i.e., search results, a long table, or so forth).  This command
presumes that the page in question uses query parameters of the form
"<code>?parm=value+parm=value</code>" to customize the page's output, and 
that the query parameter "<code>page=<i>num</i></code>" is used to select
the desired page of output.</p>

<p>The <i>pages</i> argument is the total number of pages of output, and 
<i>page</i> is the number of the page (1 to <i>pages</i>) that is currently
being shown.</p>

<p>The <i>qdict</i> parameter is a dictionary of query parameters to be included 
in the links created as part of the navigation bar.  All links are back to the
page itself.

</p>
</dd>
<dt class="defitem"><a name="para"><i>object</i> para</a></dt><dd>

Adds a <code>&lt;p&gt;</code> tag to the buffer.

</dd>
<dt class="defitem"><a name="pop"><i>object</i> pop</a></dt><dd>

Pops the buffer from the top of the stack, returning its content, or
the empty string if none.  It's an error to call <a class="iref" href="#pop">pop</a> if no
buffers have been <a class="iref" href="#push">push</a>ed.

</dd>
<dt class="defitem"><a name="pre"><i>object</i> pre ?<i>text</i>?</a></dt><dd>

Adds a <code>&lt;pre&gt;</code> tag to the buffer.  If the <i>text</i>
is given, it is sanitized for inclusion in an HTML page, and
<a class="iref" href="#/pre">/pre</a> is called automatically.

</dd>
<dt class="defitem"><a name="/pre"><i>object</i> /pre ?<i>text</i>?</a></dt><dd>

Adds a <code>&lt;/pre&gt;</code> tag to the buffer.

</dd>
<dt class="defitem"><a name="push"><i>object</i> push</a></dt><dd>

Pushes a buffer onto the stack.  Content will go into this buffer
until the next <a class="iref" href="#pop">pop</a>, <a class="iref" href="#clear">clear</a>, or <a class="iref" href="#page">page</a> command.

</dd>
<dt class="defitem"><a name="put"><i>object</i> put <i>text</i> ?<i>text...</i>?</a></dt><dd>

Adds the text strings to the buffer, separated by space characters.

</dd>
<dt class="defitem"><a name="putif"><i>object</i> putif <i>expr then</i> ?<i>else</i>?</a></dt><dd>

Evaluates the expression, <i>expr</i>; if it is true, <a class="iref" href="#put">put</a>s
the <i>then</i> text, otherwise, puts the <i>else</i> text (if any).

</dd>
<dt class="defitem"><a name="putln"><i>object</i> putln <i>text</i> ?<i>text...</i>?</a></dt><dd>

Adds a newline to the buffer, followed by the text strings separated
by space characters.

</dd>
<dt class="defitem"><a name="query"><i>object</i> query <i>sql</i> ?<i>options...</i>?</a></dt><dd><p>

Queries the <code>-rdb</code>, and generates an HTML
table with the results.  If the <i>sql</i> query returns no data,
generates the text

</p><pre>
    No data found.&lt;p&gt;
</pre>
<p>The following options may be used:

</p>

<dl>

<dt class="defopt"><a name="query-align">-align <i>string</i></a></dt><dd><p>

Specifies a string of column alignments, <b>L</b>, <b>C</b>, or
<b>R</b> for "left", "center", and "right".  By default, columns have
alignment <b>L</b>. If the string of column alignments is longer than
the number of columns returned by the query, the excess characters in 
the string are ignored. If it's shorter, the default is used for column
alignment for those columns that have no spec.</p>

<p>For example, an <code>-align</code> of <b>LRLR</b> indicates that the
second and fourth column are right-aligned.

</p>
</dd>
<dt class="defopt"><a name="query-default">-default <i>string</i></a></dt><dd>

Defines the text to generate if the result set is empty.  Defaults to
"<code>No data found.&lt;p&gt;</code>".

</dd>
<dt class="defopt"><a name="query-escape">-escape <i>flag</i></a></dt><dd>

If the <i>flag</i> is <b>yes</b>, all output from the
<code>-rdb</code> will be sanitized using <a class="iref" href="#htools_escape">htools escape</a>;
otherwise not.  The option defaults to <b>no</b>.  Use this when
querying arbitrary data so that special characters in the result will
not confuse the HTML formatting.

</dd>
<dt class="defopt"><a name="query-labels">-labels <i>list</i></a></dt><dd>

Defines a list of strings to use as the column header labels.
Alternatively, <a class="iref" href="#query">query</a> will use the column names in the result
set.

</dd>
</dl>

</dd>
<dt class="defitem"><a name="rowcount"><i>object</i> rowcount</a></dt><dd>

Returns the number of <a class="iref" href="#tr">tr</a> calls made for the most recent
<a class="iref" href="#table">table</a>.  This can be used with <a class="iref" href="#push">push</a> and <a class="iref" href="#pop">pop</a>
to avoid including a table if it has no rows of data.

</dd>
<dt class="defitem"><a name="record"><i>object</i> record ?<i>body</i>?</a></dt><dd><p>

Begins a record structure, a borderless two-column table of labels
and values; see <a href="#records_and_fields">Records and Fields</a>.  If <i>body</i> is given,
it should be a Tcl script creating content to go in the record; the record
will be terminated automatically.  If the <i>body</i> is omitted, then 
the <a class="iref" href="#/record">/record</a> command must be used to terminate the table.</p>

<p>Record structures contain one or more <a class="iref" href="#field">field</a> structures.

</p>
</dd>
<dt class="defitem"><a name="/record"><i>object</i> /record</a></dt><dd>

Terminates a <a class="iref" href="#record">record</a> structure.

</dd>
<dt class="defitem"><a name="span"><i>object</i> span <i>cls</i> ?<i>body</i>?</a></dt><dd>

Inserts a <code>&lt;span class="<i>cls</i>"&gt;</code> tag into the buffer. 
If <i>body</i> is given, it will be executed as a Tcl script; then,
<a class="iref" href="#/span">/span</a> will be called automatically.

</dd>
<dt class="defitem"><a name="/span"><i>object</i> /span</a></dt><dd>

Inserts a <code>&lt;/span&gt;</code> tag into the buffer.


</dd>
<dt class="defitem"><a name="submit"><i>object</i> submit ?<i>label</i>?</a></dt><dd><p>

Adds a "submit" button to the current <a class="iref" href="#form">form</a>.  When pressed,
the <a href="../mann/mybrowser.html">mybrowser(n)</a> will add the form's <a class="iref" href="#input">input</a> values
to the form's <b>action</b> URL using standard query syntax, and
display the resulting URL.</p>

<p>If <i>label</i> is given, it will be used as the label on the button;
otherwise the button will say "Submit".

</p>
</dd>
<dt class="defitem"><a name="subtitle"><i>object</i> subtitle <i>title</i>
?<i>anchor</i>? ?<i>link label</i> ?<i>link label...</i>??</a></dt><dd><p>

Defines a subtitle with in a page.  The subtitle is equivalent to
an <a class="iref" href="#h2">h2</a> tag; however, it can include a linkbar directly below
the title.  If
<i>anchor</i> is given, it can be used as an anchor to this subtitle
from elsewhere in the page (or from other pages entirely).  If one or
more <i>link</i>/<i>label</i> pairs are included, the linkbar will be
created; the linkbar will use <a class="iref" href="#tiny">tiny</a> text, and will be no wider
than the title (unless there are numerous links).</p>

<p>The subtitle's linkbar is usually used for links to pages that contain
more detail about the information following the subtitle.


</p>
</dd>
<dt class="defitem"><a name="table"><i>object</i> table <i>headers</i> ?<i>body</i>?</a></dt><dd><p>

Begins an HTML table with the given column <i>headers</i>.</p>

<p>If <i>body</i> is given, it will be executed as a Tcl script; then,
<a class="iref" href="#/table">/table</a> will be called automatically.


</p>
</dd>
<dt class="defitem"><a name="/table"><i>object</i> /table</a></dt><dd>

Completes an HTML table.

</dd>
<dt class="defitem"><a name="td"><i>object</i> td ?<i>align</i>? ?<i>body</i>?</a></dt><dd><p>

Adds a <code>&lt;td&gt;</code> tag for a new table cell.  The
default alignment is <b>left</b>, but <i>align</i> may be
<b>left</b>, <b>right</b>, or <b>center</b>.</p>

<p>If <i>body</i> is given, it will be executed as a Tcl script; then,
<a class="iref" href="#/td">/td</a> will be called automatically.


</p>
</dd>
<dt class="defitem"><a name="/td"><i>object</i> /td</a></dt><dd>

Completes an HTML table cell with a <code>&lt;/td&gt;</code> tag.

</dd>
<dt class="defitem"><a name="tr"><i>object</i> tr ?<i>attr value...</i>? ?<i>body</i>?</a></dt><dd><p>

Adds a <code>&lt;tr&gt;</code> tag for a new table row.</p>

<p>If any attributes and values are given, they will be included in the
generated tag.</p>

<p>If <i>body</i> is given, it will be executed as a Tcl script; then,
<a class="iref" href="#/tr">/tr</a> will be called automatically.


</p>
</dd>
<dt class="defitem"><a name="/tr"><i>object</i> /tr</a></dt><dd>

Completes an HTML table row with a <code>&lt;/tr&gt;</code> tag.


</dd>
<dt class="defitem"><a name="tiny"><i>object</i> tiny <i>text</i></a></dt><dd>

Adds the <i>text</i> to the buffer in a tiny font.

</dd>
<dt class="defitem"><a name="tinyb"><i>object</i> tinyb <i>text</i></a></dt><dd>

Adds the <i>text</i> to the buffer in a tiny bold font.

</dd>
<dt class="defitem"><a name="tinyi"><i>object</i> tinyi <i>text</i></a></dt><dd>

Adds the <i>text</i> to the buffer in a tiny italic font.

</dd>
<dt class="defitem"><a name="title"><i>object</i> title <i>title</i> ?<i>over</i>? ?<i>under</i>?</a></dt><dd>

Formats a visible page <i>title</i> (as distinguished from the
<code>&lt;title&gt;</code> tag in the page header, which is not
normally visible).  If the <i>over</i> text is given, it will appear
in small type immediately over the main <i>title</i>; if the
<i>under</i> text is given, it will in normal type immediately under
the main <i>title</i>.

</dd>
<dt class="defitem"><a name="ul"><i>object</i> ul ?<i>body</i>?</a></dt><dd><p>

Inserts a <code>&lt;ul&gt;</code> tag into the buffer.</p>

<p>If <i>body</i> is given, it will be executed as a Tcl script; then,
<a class="iref" href="#/ul">/ul</a> will be called automatically.

</p>
</dd>
<dt class="defitem"><a name="/ul"><i>object</i> /ul</a></dt><dd>

Inserts a <code>&lt;/ul&gt;</code> tag into the buffer.

</dd>
</dl>

<h2><a name="environment">ENVIRONMENT</a></h2>
<p>Requires Tcl 8.5 or later.

</p>

<h2><a name="author">AUTHOR</a></h2>
<p>Will Duquette

</p>

<h2><a name="history">HISTORY</a></h2>
<p>Original package.

</p>

<hr>
<p><i>athena 6.3.3 Man page generated by manpage(n) on 
Fri Nov 20 09:48:58 PST 2015</i>
</p>

</body>
</html>
    






