<!-- ar-comp-chain element -->

<h2>{{header}} <small>{{page.chain}}</h2>
<div>
  <form class="form-inline" style="margin-bottom:15px">
    <div class="form-group">
      <label for="varname" class="control-label">Variable:</label>
      <select id="varname" class="form-control input-sm" 
              ng-model="page.chain"
              ng-options="name for name in page.outputNames()"
              ng-change="page.requestChain(page.chain)">
      </select>
    </div>
    <div class="form-group">
      <label for="siglevel" class="control-label">Significance Level:</label>
      <select id="siglevel" class="form-control input-sm" 
              ng-model="comp.siglevel"
              ng-options="level for level in comp.levels">
      </select>
    </div>
    <div class="form-group">
      <label class="control-label">Total Inputs:</label>
      <p class="form-control-static">{{comp.size()}}</p>
    </div>
    <div class="form-group">
      <label class="control-label">Significant Inputs:</label>
      <p class="form-control-static">{{comp.visibleSize()}}</p>
    </div>
  </form>
<div>

<p ng-if="!comp.size()">
Variable <b>{{page.chain}}</b> has no significant inputs.  Either it is
a model input, or we haven't yet implemented chaining for it.
</p>

<div ng-if="comp.size()">

  <table class="table auto-width">
    <tr>
      <th>ID</th>
      <th>Parent</th>
      <th>Output</th>
      <th>Type</th>
      <th>Narrative</th>
      <th>Score</th>
    </tr>

    <tr ng-repeat="var in comp.visibleItems()">
      <td>{{var.id}}</td>
      <td>{{var.parent}}</td>
      <td>
        <span class="text-primary" ng-class="var.class">
          {{var.name}}
        </span>
      </td>
      <td><span class="label label-primary">{{var.type}}</span></td>
      <td>
        {{var.narrative}}
      </td>
      <td class="right">{{var.score | number:2}}</td>
    </tr>
  </table>
</div>
