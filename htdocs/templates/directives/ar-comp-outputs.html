<!-- ar-comp-outputs element -->

<h2>{{header}}</h2>

<p ng-if="!comp.size()">
No {{comp.catName() | lowercase}} outputs differ in non-trivial ways
in this comparison.
</p>

<div ng-if="comp.size()">
  <hr/>
  <form class="form-inline" style="margin-bottom:15px">
    <div class="form-group">
      <label for="siglevel" class="control-label">Significance Level:</label>
      <select id="siglevel" class="form-control input-sm" 
        ng-model="comp.siglevel"
        ng-options="level for level in comp.levels">
      </select>
    </div>
    <div class="form-group">
      <label class="control-label padleft">Significant Outputs:</label>
      <p class="form-control-static">{{comp.sigSize()}}</p>
    </div>
    <div class="form-group">
      <label class="control-label padleft">Total Outputs:</label>
      <p class="form-control-static">{{comp.size()}}</p>
    </div>
  </form>

  <table class="table auto-width">
    <tr>
      <th ng-show="category === 'all'">
        <a href ng-click="comp.sortby('category')">Category</a>
      </th>
      <th><a href ng-click="comp.sortby('name')">Output</a></th>
      <th><a href ng-click="comp.sortby('type')">Type</a></th>
      <th><a href ng-click="comp.sortby('narrative')">Narrative</a></th>
      <th><a href ng-click="comp.sortby('score',true)">Score</a></th>
    </tr>

    <tr ng-repeat="output in comp.sigOutputs() | orderBy:sortby:reverse">
      <td ng-show="category === 'all'">{{comp.catName(output.category)}}</td>
      <td>
        <span ng-if="output.leaf" class="text-primary">
        {{output.name}} 
        </span>
        <span ng-if="!output.leaf" class="text-primary">
          <a ng-href="{{'#/chain/' + compid + '/' + output.name}}">
            {{output.name}} 
            <span class="glyphicon glyphicon-link"></span>
          </a>
        </span>
      </td>
      <td><span class="label label-primary">{{output.type}}</span></td>
      <td>
        <div>
          <span class="glyphicon" ng-class="comp.toggleClass(output.name)"
            ng-click="comp.toggle(output.name)"></span>
          {{output.narrative}}
        </div>
        <ar-varbox vardiff="output" ng-if="comp.isExpanded(output.name)">
        </ar-varbox>
    </td>
    <td class="right">{{output.score | number:2}}</td>
  </tr>
  </table>
</div>
