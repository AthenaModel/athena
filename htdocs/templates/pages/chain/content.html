<section>

<h1>
<small>
<a href="#/comparison/{{page.compId}}">{{page.casename()}}</a>
</small>
<br/>
Chain: {{page.varname}}
</h1>

<div>
  <span class="glyphicon" ng-class="page.detailClass()"
    ng-click="page.toggleDetail()"></span>
  {{page.var().narrative}}
</div>

<ar-varbox vardiff="page.var()" ng-if="page.showDetail()"></ar-varbox>

<ar-tbd-list>
<li> Indent narratives, push triangle button left, so wrapping looks better.</li>
<li> Add chain links to sidebar.</li>
</ar-tbd-list>

<hr/>

<div>
  <form class="form-inline" style="margin-bottom:15px">
    <div class="form-group">
      <label for="siglevel" class="control-label">Significance Level:</label>
      <select id="siglevel" class="form-control input-sm" 
              ng-model="page.siglevel"
              ng-options="level for level in page.levels">
      </select>
    </div>
    <div class="form-group">
      <label class="control-label padleft">Significant Inputs:</label>
      <p class="form-control-static">{{page.visibleSize()}}</p>
    </div>
    <div class="form-group">
      <label class="control-label padleft">Total Inputs:</label>
      <p class="form-control-static">{{page.size()}}</p>
    </div>
  </form>
<div>

<p ng-if="!page.size()">
Variable <b>{{varname}}</b> has no significant inputs.  Either it is
a model input, or we haven't yet implemented chaining for it.
</p>

<div ng-if="page.size()">
  <table class="table auto-width">
    <tr>
      <th>Output</th>
      <th>Narrative</th>
      <th>Score</th>
    </tr>

    <tr ng-repeat="var in page.visibleItems()">
      <td>
        <span class="text-primary" ng-class="var.indent">
          {{var.name}} 
        </span>
      </td>
      <td>
        <div>
          <span class="glyphicon" ng-class="page.toggleClass(var.name)"
            ng-click="page.toggle(var.name)"></span>
          {{var.narrative}}
        </div>
        <ar-varbox vardiff="var" ng-if="page.isExpanded(var.name)">
        </ar-varbox>
      </td>
      <td class="right">{{var.score | number:2}}</td>
    </tr>
  </table>
</div>

</section>
